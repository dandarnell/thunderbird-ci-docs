{#  -*- coding: utf-8 -*- #}
{% import 'base_helper.tmpl' as base with context %}
{% import 'helpers.tmpl' as tbhelper with context %}
{% import 'base_header.tmpl' as header with context %}
{% import 'base_footer.tmpl' as footer with context %}
{{ set_locale(lang) }}
{#  <html> tag is included by base.html_headstart #}
{{ base.html_headstart() }}
{% block extra_head %}
  {#  Leave this block alone. #}
{% endblock %}
<link href="/assets/css/tbrelease.css" rel="stylesheet" type="text/css">
{{ template_hooks['extra_head']() }}
</head>
<body>
<div class="dash">
  <div class="dash-nav dash-nav-dark">
    <header>
      <a href="/" class="spur-logo">
        {% if logo_url %}
          <img src="{{ logo_url }}" alt="{{ blog_title|e }}" id="logo"
               class="d-inline-block align-top">
        {% endif %}
      </a>
    </header>
    <nav class="dash-nav-list">
      <ul class="nav nav-pills flex-column">
        {{ tbhelper.html_navigation_links_entries(navigation_links) }}
        {{ template_hooks['menu']() }}
      </ul>
    </nav>
  </div>

  <div class="dash-app" id="content" role="main">
    <header class="dash-toolbar">
      <span>The reports of Thunderbird's death have been greatly exaggerated.</span>
      {{ template_hooks['page_header']() }}
      {% block extra_header %}{% endblock %}
    </header>

    <!--Body content-->
    <div id="container">

        <main id="content">
            {% block content %}{% endblock %}
        </main>
        {{ footer.html_footer() }}
    </div>
    {{ base.late_load_js() }}
    {% if date_fanciness != 0 %}
    <!-- fancy dates -->
    <script>
    luxon.Settings.defaultLocale = "{{ luxon_locales[lang] }}";
    fancydates({{ date_fanciness }}, {{ luxon_date_format }});
    </script>
    <!-- end fancy dates -->
    {% endif %}
    {% block extra_js %}{% endblock %}
    <script>
    baguetteBox.run('main#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
    {{ body_end }}
    {{ template_hooks['body_end']() }}
</body>
</html>
